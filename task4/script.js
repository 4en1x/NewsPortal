var articles = [
  {
    id: '1',
    title: 'Канадская теннисистка сходила на свидание с болельщиком, которому проспорила в Твиттере',
    summary: 'T44-ая ракетка мира согласилась провести время с фанатом, если клуб «Нью-Инглэнд Пэтриотс» станет победителем Супербоула.',
    createdAt: new Date('2017-02-27T23:00:00'),
    author: 'Иван',
    content: 'T44-ая ракетка мира согласилась провести время с фанатом, если клуб «Нью-Инглэнд Пэтриотс» станет победителем Супербоула.T44-ая ракетка мира согласилась провести время с фанатом, если клуб «Нью-Инглэнд Пэтриотс» станет победителем Супербоула.',
      tags:["music","usa"]
   },
   {
    id: '2',
    title: 'Видеоблогер PewDiePie выпустил ролик с извинениями за антисемитские шутки',
    summary: 'В нём он также заявил, что СМИ выдрали его слова из контекста.',
    createdAt: new Date('2016-02-27T23:00:00'),
    author: 'Иванов Иван',
    content: 'В нём он также заявил, что СМИ выдрали его слова из контекста.В нём он также заявил, что СМИ выдрали его слова из контекста.',
       tags:["music"]
   },
   {
    id: '3',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2018-02-27T23:00:00'),
    author: 'Иванов Петр',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","super"]
   },
   {
    id: '4',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2014-02-27T23:00:00'),
    author: 'Иванов Иван',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["usa"]
   },
   {
    id: '5',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2011-02-27T23:00:00'),
    author: 'Некий человек',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music"]
   },
   {
    id: '6',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2010-02-27T23:00:00'),
    author: 'Иванов Иван',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","usa"]
   },
   {
    id: '7',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2022-02-27T23:00:00'),
    author: 'Илья Сидоров',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","usa"]
   },
   {
    id: '8',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('1999-02-27T23:00:00'),
    author: 'Илья Сидоров',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","usa"]
   },
   {
    id: '9',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2003-02-27T23:00:00'),
    author: 'Иван',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","usa"]
   },
   {
    id: '10',
    title: 'Минское «Динамо» обыграло ярославский «Локомотив»',
    summary: 'Минское «Динамо» обыграло ярославский «Локомотив» в четвертом матче первого раунда плей-офф КХЛ — 4:2',
    createdAt: new Date('2117-02-27T23:00:00'),
    author: 'Иванов Иван',
    content: 'Гости создали больше опасных моментов и в два раза перебросали минчан, но «зубры» на этот раз очень эффективно использовали свои моменты.',
       tags:["music","usa"]
   }
];
var tags=["job","music","school","super","cool","2017","hobby","usa"];
function getArticles(skip,top,filterConfig){
  skip=skip||0;
  top=top||10;
  if(filterConfig!==undefined) {
      var _author = filterConfig.author || "";
      var _beginDate = filterConfig.beginDate || new Date(-8640000000000000);
      var _endDate = filterConfig.endDate || new Date(8640000000000000);
      var _tags = filterConfig.tags;
  }
  var _articles=articles;
  if(filterConfig!==undefined) {
      _articles = _articles.filter(function (param) {
          return param.author.indexOf(_author) > -1;
      });
      _articles = _articles.filter(function (param) {
          return param.createdAt >= _beginDate && param.createdAt <= _endDate;
      });
  }
  if(_tags!==undefined) {
      _articles = _articles.filter(function (param) {
          var _count=_tags.length;
          for(var i=0;i<param.tags.length;i++){
              for(var j=0;j<_tags.length;j++){
                  if(param.tags[i]===_tags[j]) _count--;
              }
          }
          if(_count==0) return true;
          return false;
        });
    }
  return _articles.sort(function (a,b) {return a.createdAt-b.createdAt<0;}).slice(skip,skip+top);
};
function getArticle(id) {
    if(id===undefined)return undefined;
    for (var i = 0; i < articles.length; i++) {
        if (articles[i].id == id) return articles[i];
    }
    return undefined;
};
function validateArticle(article,withoutID) {
    if(typeof article.title !== 'string'||article.title.length<=0||article.title.length>100) return false;
    if(typeof article.summary !== 'string'||article.summary.length<=0||article.summary.length>200) return false;
    if(withoutID===undefined&&(typeof article.id !== 'string'||article.id.length<=0||getArticle(article.id)!==undefined)) return false;
    if((article.createdAt instanceof Date)===false)return false;
    if(typeof article.author !== 'string'||article.author.length<=0) return false;
    if(typeof article.content !== 'string'||article.content.length<=0) return false;
    if(article.tags.length<=0) return false;
    for(var i=0;i<article.tags.length;i++){
        var count=0;
        for(var j=0;j<tags.length;j++){
            if(tags[j]===article.tags[i])
                count++;
        }
        if(count===0) return false;
    }
    return true;
};
function addArticle(article) {
    if(validateArticle(article)===true){
        articles.push(article);
        return true;
    }
    return false;
};
function editArticle(id,article) {
    var _article;
    if((_article=getArticle(id))===undefined)return false;
    if(article.title!==undefined) _article.title=article.title;
    if(article.summary!==undefined) _article.summary=article.summary;
    if(article.content!==undefined) _article.content=article.content;
    if(article.tags!==undefined) _article.tags=article.tags;
    if(validateArticle(_article,"")===true){
        getArticle(id).title=_article.title;
        getArticle(id).summary=_article.summary;
        getArticle(id).content=_article.content;
        getArticle(id).tags=_article.tags;
        return true;
    }
    return false;
};
function inTags(tag) {
    for(var i=0;i<tags.length;i++){
        if(tags[i]===tag) return i;
    }
    return -1;
};
function addTag(tag) {
    if(inTags(tag)===-1) {
        tags.push(tag);
        return true;
    }
    return false;
};
function deleteTag(tag) {
    var x=inTags(tag);
    if(x!==-1) {
        tags.splice(x, 1);
        return true;
    }
    return false;
};
function removeArticle(id) {
    var x;
    for (var i = 0; i < articles.length; i++) {
        if (articles[i].id == id) x=i;
    }
    if(x===undefined) return false;
    articles.splice(x,1);
    return true;
};

console.log("***Различные варианты работы метода getArticles:***");
console.log("\n\rgetArticles() - просто выводим все записи");
console.log(getArticles());
console.log("\n\r\n\rgetArticles(3,4) - теперь берём некоторый промежуток");
console.log(getArticles(3,4));
console.log("\n\r\n\rgetArticles(1,9,{author:'Иван',tags:['music','usa']}) - некоторый фильтр");
console.log(getArticles(1,9,{author:'Иван',tags:["music","usa"]}));
console.log("\n\r\n\rgetArticles(1,9,{author:'Иван',beginDate:new Date('2010-02-27T23:00:00'),endDate:new Date('2018-02-27T23:00:00')}) - ещё фильтр");
console.log(getArticles(1,9,{author:'Иван',beginDate:new Date('2010-02-27T23:00:00'),endDate:new Date('2018-02-27T23:00:00')}));
console.log("\n\r\n\rgetArticles(3,4,{}) - так,например, метод тоже будет работать,но никакой фильтрации не будет,ровно как и ошибок");
console.log(getArticles(3,4,{}));

console.log("\n\r\n\r***Различные варианты работы метода getArticle:***");
console.log("\n\rgetArticle('234') - несуществующий id");
console.log(getArticle("234"));
console.log("\n\r\n\rgetArticle('1') - существующий id");
console.log(getArticle("1"));
console.log("\n\r\n\rgetArticle() - если вызывать без параметров,ошибок не будет, вернёт undefined");
console.log(getArticle());

console.log("\n\r\n\r***Различные варианты работы метода addArticle(одновременно проверяется метод validateArticle, и отдельно рассматривать я его не буду):***");
console.log("\n\r***Также,ради экномия места,я не буду выводить изменения в массиве articles ,а просто результат работы функции***");
console.log("\n\raddArticle({title:'32r43',id:'14',summary:'some interesting text',author:'dfg',tags:['usa'],createdAt:new Date(),content:'dsfsdf'}) - пример добавления полностью валидной новости");
console.log(addArticle({title:"32r43",id:"14",summary:"some interesting text",author:"dfg",tags:["usa"],createdAt:new Date(),content:"dsfsdf"}));
console.log("\n\r\n\raddArticle({title:'32r43',id:'1',summary:'some interesting text',author:'dfg',tags:['usa'],createdAt:new Date(),content:'dsfsdf'}) - не добавит,так как такой id уже есть");
console.log(addArticle({title:"32r43",id:"1",summary:"some interesting text",author:"dfg",tags:["usa"],createdAt:new Date(),content:"dsfsdf"}));
console.log("\n\r\n\raddArticle({title:'32r43',id:'15',summary:'some interesting text',author:'dfg',tags:['usa'],createdAt:new Date(),content:''}) - не добавит,так как одно из обязательных полей пустое");
console.log(addArticle({title:"32r43",id:"15",summary:"some interesting text",author:"dfg",tags:["usa"],createdAt:new Date(),content:""}));
console.log("\n\r\n\raddArticle({title:'32r43',id:'16',summary:'some interesting text',author:'dfg',tags:['usa'],createdAt:new Date()}) - не добавит,так как одно из обязательных полей отсутствует");
console.log(addArticle({title:"32r43",id:"16",summary:"some interesting text",author:"dfg",tags:["usa"],createdAt:new Date()}));
console.log("\n\r\n\raddArticle({title:'32r43',id:'17',summary:'some interesting text',author:'dfg',tags:['banana'],createdAt:new Date(),content:'dsfsdf'}) - не добавит,т.к один из тегов отстствует в массиве тегов");
console.log(addArticle({title:"32r43",id:"17",summary:"some interesting text",author:"dfg",tags:["banana"],createdAt:new Date(),content:"dsfsdf"}));

console.log("\n\r\n\r***Различные варианты работы метода editArticle:***");
console.log("\n\reditArticle('1',{title:'123'}) -простой пример");
console.log(editArticle("1",{title:"123"}));
console.log("\n\r\n\reditArticle('1678',{title:'123'}) -несуществуюший id");
console.log(editArticle("1678",{title:"123"}));
console.log("\n\r\n\reditArticle('1',{title:'123',tags:['usa','music'],content:'la-la-la'}) -пример посложнее");
console.log(editArticle("1",{title:"123",tags:["usa","music"],content:"la-la-la"}));
console.log("\n\r\n\reditArticle('1',{title:'123',tags:['usa','music'],content:''}) -не пройдёт,т.к одно поле пустое");
console.log(editArticle("1",{title:"123",tags:["usa","music"],content:""}));
console.log("\n\r\n\reditArticle('1',{title:'123',tags:['banana','music'],content:'la-la-la'}) -не пройдёт,попытка добавить несуществуюший тег");
console.log(editArticle("1",{title:"123",tags:["banana","music"],content:"la-la-la"}));

console.log("\n\r\n\r***Различные варианты работы метода removeArticle:***");
console.log("\n\rremoveArticle('1') -простой пример");
console.log(removeArticle("1"));
console.log("\n\r\n\rremoveArticle('132') -не пройдёт,нет такого id");
console.log(removeArticle("132"));

console.log("\n\r\n\r***Различные варианты работы метода addTag:***");
console.log("\n\raddTag('banana') -простой пример");
console.log(addTag("banana"));
console.log("\n\r\n\raddTag('usa') -не сработает,такой тег уже есть");
console.log(addTag("usa"));

console.log("\n\r\n\r***Различные варианты работы метода deleteTag:***");
console.log("\n\rdeleteTag('usa') -простой пример");
console.log(deleteTag("usa"));
console.log("\n\r\n\rdeleteTag('la-la-la') -не сработает,такого тега нет");
console.log(deleteTag("la-la-la"));